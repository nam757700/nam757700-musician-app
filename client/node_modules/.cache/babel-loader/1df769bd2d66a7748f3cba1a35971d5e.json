{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\pineline\\\\nam757700-musician-app\\\\client\\\\src\\\\components\\\\MusiciansAdmin.js\";\nimport React, { Component, Fragment } from 'react';\nimport Musician from './Musician';\nimport axios from \"axios\";\n\nvar MusiciansAdmin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MusiciansAdmin, _Component);\n\n  function MusiciansAdmin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MusiciansAdmin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MusiciansAdmin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      newmusician: {\n        firstName: \"\",\n        lastName: \"\",\n        genre: \"\"\n      },\n      musicians: []\n    };\n    _this.outputHTML = \"\";\n\n    _this.handleAddMusician =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id, event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.put(\"/musician/\".concat(id), _this.state.newmusician);\n\n              case 4:\n                _this.setState({\n                  musicians: [].concat(_toConsumableArray(_this.state.musicians), [_this.state.newmusician])\n                });\n\n                _this.setState({\n                  newmusician: {\n                    \"firstName\": \"\",\n                    \"lastName\": \"\",\n                    \"genre\": \"\"\n                  }\n                });\n\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleUpdateMusician = function (id, name) {\n      // add call to AWS API Gateway update musician endpoint here\n      var musicianToUpdate = _toConsumableArray(_this.state.musicians).find(function (musician) {\n        return musician.id === id;\n      });\n\n      var updatedMusicians = _toConsumableArray(_this.state.musicians).filter(function (musician) {\n        return musician.id !== id;\n      });\n\n      musicianToUpdate.musicianname = name;\n      updatedMusicians.push(musicianToUpdate);\n\n      _this.setState({\n        musicians: updatedMusicians\n      });\n    };\n\n    _this.handleDeleteMusician =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(id, event) {\n        var updatedMusicians;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // using firstName as the id in musicians state\n                event.preventDefault();\n                _context2.prev = 1;\n                _context2.next = 4;\n                return axios.delete(\"/musician/\".concat(id));\n\n              case 4:\n                _context2.next = 6;\n                return _toConsumableArray(_this.state.musicians).filter(function (musician) {\n                  return musician.firstName.toLowerCase() !== id;\n                });\n\n              case 6:\n                updatedMusicians = _context2.sent;\n\n                _this.setState({\n                  musicians: updatedMusicians\n                });\n\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 10]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.fetchMusicians =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var res, allMusicians;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get('/musician/all');\n\n            case 3:\n              res = _context3.sent;\n              allMusicians = Object.keys(res.data).map(function (key) {\n                return res.data[key];\n              });\n\n              _this.setState({\n                musicians: _toConsumableArray(allMusicians)\n              });\n\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 8]]);\n    }));\n\n    _this.onAddMusicianFirstNameChange = function (event) {\n      return _this.setState({\n        newmusician: _objectSpread({}, _this.state.newmusician, {\n          \"firstName\": event.target.value\n        })\n      });\n    };\n\n    _this.onAddMusicianLastNameChange = function (event) {\n      return _this.setState({\n        newmusician: _objectSpread({}, _this.state.newmusician, {\n          \"lastName\": event.target.value\n        })\n      });\n    };\n\n    _this.onAddMusicianGenreChange = function (event) {\n      return _this.setState({\n        newmusician: _objectSpread({}, _this.state.newmusician, {\n          \"genre\": event.target.value\n        })\n      });\n    };\n\n    _this.componentDidMount = function () {\n      _this.fetchMusicians();\n    };\n\n    return _this;\n  }\n\n  _createClass(MusiciansAdmin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"subtitle is-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Add and remove musicians using the form below:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-one-third\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(event) {\n          return _this2.handleAddMusician(_this2.state.newmusician.firstName.toLowerCase(), event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter first name\",\n        value: this.state.newmusician.firstName,\n        onChange: this.onAddMusicianFirstNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter last name\",\n        value: this.state.newmusician.lastName,\n        onChange: this.onAddMusicianLastNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter genre\",\n        value: this.state.newmusician.genre,\n        onChange: this.onAddMusicianGenreChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"button is-primary is-medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Add musician\"))))), React.createElement(\"div\", {\n        className: \"column is-two-thirds\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.state.musicians.map(function (musician, index) {\n        return React.createElement(Musician, {\n          isAdmin: true,\n          handleUpdateMusician: _this2.handleUpdateMusician,\n          handleDeleteMusician: _this2.handleDeleteMusician,\n          firstname: musician.firstName,\n          lastname: musician.lastName,\n          genre: musician.genre,\n          key: musician.lastName.toLowerCase(),\n          id: musician.firstName.toLowerCase(),\n          index: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n      }))))));\n    }\n  }]);\n\n  return MusiciansAdmin;\n}(Component);\n\nexport { MusiciansAdmin as default };","map":{"version":3,"sources":["C:\\Users\\Admin\\Documents\\pineline\\nam757700-musician-app\\client\\src\\components\\MusiciansAdmin.js"],"names":["React","Component","Fragment","Musician","axios","MusiciansAdmin","state","newmusician","firstName","lastName","genre","musicians","outputHTML","handleAddMusician","id","event","preventDefault","put","setState","console","log","handleUpdateMusician","name","musicianToUpdate","find","musician","updatedMusicians","filter","musicianname","push","handleDeleteMusician","delete","toLowerCase","fetchMusicians","get","res","allMusicians","Object","keys","data","map","key","onAddMusicianFirstNameChange","target","value","onAddMusicianLastNameChange","onAddMusicianGenreChange","componentDidMount","index"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEqBC,c;;;;;;;;;;;;;;;;;UAEnBC,K,GAAQ;AACNC,MAAAA,WAAW,EAAE;AACXC,QAAAA,SAAS,EAAE,EADA;AAEXC,QAAAA,QAAQ,EAAE,EAFC;AAGXC,QAAAA,KAAK,EAAE;AAHI,OADP;AAMNC,MAAAA,SAAS,EAAE;AANL,K;UASRC,U,GAAa,E;;UAEbC,iB;;;;;+BAAoB,iBAAMC,EAAN,EAAUC,KAAV;AAAA;AAAA;AAAA;AAAA;AAClBA,gBAAAA,KAAK,CAACC,cAAN;AADkB;AAAA;AAAA,uBAGVZ,KAAK,CAACa,GAAN,qBAAuBH,EAAvB,GAA6B,MAAKR,KAAL,CAAWC,WAAxC,CAHU;;AAAA;AAIhB,sBAAKW,QAAL,CAAc;AAAEP,kBAAAA,SAAS,+BAAM,MAAKL,KAAL,CAAWK,SAAjB,IAA4B,MAAKL,KAAL,CAAWC,WAAvC;AAAX,iBAAd;;AACA,sBAAKW,QAAL,CAAc;AAAEX,kBAAAA,WAAW,EAAE;AAAE,iCAAa,EAAf;AAAmB,gCAAY,EAA/B;AAAmC,6BAAS;AAA5C;AAAf,iBAAd;;AALgB;AAAA;;AAAA;AAAA;AAAA;AAOhBY,gBAAAA,OAAO,CAACC,GAAR;;AAPgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;UAWpBC,oB,GAAuB,UAACP,EAAD,EAAKQ,IAAL,EAAc;AACnC;AACA,UAAMC,gBAAgB,GAAG,mBAAI,MAAKjB,KAAL,CAAWK,SAAf,EAA0Ba,IAA1B,CAA+B,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACX,EAAT,KAAgBA,EAApB;AAAA,OAAvC,CAAzB;;AACA,UAAMY,gBAAgB,GAAG,mBAAI,MAAKpB,KAAL,CAAWK,SAAf,EAA0BgB,MAA1B,CAAiC,UAAAF,QAAQ;AAAA,eAAIA,QAAQ,CAACX,EAAT,KAAgBA,EAApB;AAAA,OAAzC,CAAzB;;AACAS,MAAAA,gBAAgB,CAACK,YAAjB,GAAgCN,IAAhC;AACAI,MAAAA,gBAAgB,CAACG,IAAjB,CAAsBN,gBAAtB;;AACA,YAAKL,QAAL,CAAc;AAACP,QAAAA,SAAS,EAAEe;AAAZ,OAAd;AACD,K;;UAEDI,oB;;;;;+BAAuB,kBAAMhB,EAAN,EAAUC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACrB;AACAA,gBAAAA,KAAK,CAACC,cAAN;AAFqB;AAAA;AAAA,uBAIbZ,KAAK,CAAC2B,MAAN,qBAA0BjB,EAA1B,EAJa;;AAAA;AAAA;AAAA,uBAKY,mBAAI,MAAKR,KAAL,CAAWK,SAAf,EAA0BgB,MAA1B,CAAiC,UAAAF,QAAQ;AAAA,yBAAIA,QAAQ,CAACjB,SAAT,CAAmBwB,WAAnB,OAAqClB,EAAzC;AAAA,iBAAzC,CALZ;;AAAA;AAKbY,gBAAAA,gBALa;;AAMnB,sBAAKR,QAAL,CAAc;AAACP,kBAAAA,SAAS,EAAEe;AAAZ,iBAAd;;AANmB;AAAA;;AAAA;AAAA;AAAA;AAQnBP,gBAAAA,OAAO,CAACC,GAAR;;AARmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;UAYvBa,c;;;;6BAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEK7B,KAAK,CAAC8B,GAAN,CAAU,eAAV,CAFL;;AAAA;AAEPC,cAAAA,GAFO;AAGPC,cAAAA,YAHO,GAGQC,MAAM,CAACC,IAAP,CAAYH,GAAG,CAACI,IAAhB,EAAsBC,GAAtB,CAA0B,UAACC,GAAD,EAAS;AACtD,uBAAON,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAP;AACD,eAFoB,CAHR;;AAMb,oBAAKvB,QAAL,CAAc;AAAEP,gBAAAA,SAAS,qBAAMyB,YAAN;AAAX,eAAd;;AANa;AAAA;;AAAA;AAAA;AAAA;AAQbjB,cAAAA,OAAO,CAACC,GAAR;;AARa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAYjBsB,4B,GAA+B,UAAA3B,KAAK;AAAA,aAAI,MAAKG,QAAL,CAAc;AAAEX,QAAAA,WAAW,oBAAO,MAAKD,KAAL,CAAWC,WAAlB;AAA+B,uBAAaQ,KAAK,CAAC4B,MAAN,CAAaC;AAAzD;AAAb,OAAd,CAAJ;AAAA,K;;UACpCC,2B,GAA8B,UAAA9B,KAAK;AAAA,aAAI,MAAKG,QAAL,CAAc;AAAEX,QAAAA,WAAW,oBAAO,MAAKD,KAAL,CAAWC,WAAlB;AAA+B,sBAAYQ,KAAK,CAAC4B,MAAN,CAAaC;AAAxD;AAAb,OAAd,CAAJ;AAAA,K;;UACnCE,wB,GAA2B,UAAA/B,KAAK;AAAA,aAAI,MAAKG,QAAL,CAAc;AAAEX,QAAAA,WAAW,oBAAO,MAAKD,KAAL,CAAWC,WAAlB;AAA+B,mBAASQ,KAAK,CAAC4B,MAAN,CAAaC;AAArD;AAAb,OAAd,CAAJ;AAAA,K;;UAEhCG,iB,GAAoB,YAAM;AACxB,YAAKd,cAAL;AACD,K;;;;;;;6BAEQ;AAAA;;AACP,aACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAS,QAAA,SAAS,EAAC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,QAAQ,EAAE,kBAAAlB,KAAK;AAAA,iBAAI,MAAI,CAACF,iBAAL,CAAuB,MAAI,CAACP,KAAL,CAAWC,WAAX,CAAuBC,SAAvB,CAAiCwB,WAAjC,EAAvB,EAAuEjB,KAAvE,CAAJ;AAAA,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,WAAW,EAAC,kBAHd;AAIE,QAAA,KAAK,EAAE,KAAKT,KAAL,CAAWC,WAAX,CAAuBC,SAJhC;AAKE,QAAA,QAAQ,EAAE,KAAKkC,4BALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF,EAYE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,WAAW,EAAC,iBAHd;AAIE,QAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWC,WAAX,CAAuBE,QAJhC;AAKE,QAAA,QAAQ,EAAE,KAAKoC,2BALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CAZF,EAuBE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,WAAW,EAAC,aAHd;AAIE,QAAA,KAAK,EAAE,KAAKvC,KAAL,CAAWC,WAAX,CAAuBG,KAJhC;AAKE,QAAA,QAAQ,EAAE,KAAKoC,wBALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CAvBF,EAkCE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,6BAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CADF,CAlCF,CADF,CADF,EA6CE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,KAAKxC,KAAL,CAAWK,SAAX,CAAqB6B,GAArB,CAAyB,UAACf,QAAD,EAAWuB,KAAX;AAAA,eACvB,oBAAC,QAAD;AACI,UAAA,OAAO,EAAE,IADb;AAEI,UAAA,oBAAoB,EAAE,MAAI,CAAC3B,oBAF/B;AAGI,UAAA,oBAAoB,EAAE,MAAI,CAACS,oBAH/B;AAII,UAAA,SAAS,EAAEL,QAAQ,CAACjB,SAJxB;AAKI,UAAA,QAAQ,EAAEiB,QAAQ,CAAChB,QALvB;AAMI,UAAA,KAAK,EAAEgB,QAAQ,CAACf,KANpB;AAOI,UAAA,GAAG,EAAEe,QAAQ,CAAChB,QAAT,CAAkBuB,WAAlB,EAPT;AAQI,UAAA,EAAE,EAAEP,QAAQ,CAACjB,SAAT,CAAmBwB,WAAnB,EARR;AASI,UAAA,KAAK,EAAEgB,KATX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADuB;AAAA,OAAzB,CAFJ,CA7CF,CAHF,CADF,CADF,CADF;AAwED;;;;EA1IyC/C,S;;SAAvBI,c","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport Musician from './Musician';\r\nimport axios from \"axios\";\r\n\r\nexport default class MusiciansAdmin extends Component {\r\n\r\n  state = {\r\n    newmusician: { \r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      genre: \"\"\r\n    },\r\n    musicians: []\r\n  }\r\n\r\n  outputHTML = \"\";\r\n\r\n  handleAddMusician = async(id, event) => {\r\n    event.preventDefault();\r\n    try {\r\n      await axios.put(`/musician/${id}`, this.state.newmusician);\r\n      this.setState({ musicians: [...this.state.musicians, this.state.newmusician] });\r\n      this.setState({ newmusician: { \"firstName\": \"\", \"lastName\": \"\", \"genre\": \"\" }});\r\n    }catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  handleUpdateMusician = (id, name) => {\r\n    // add call to AWS API Gateway update musician endpoint here\r\n    const musicianToUpdate = [...this.state.musicians].find(musician => musician.id === id);\r\n    const updatedMusicians = [...this.state.musicians].filter(musician => musician.id !== id);\r\n    musicianToUpdate.musicianname = name;\r\n    updatedMusicians.push(musicianToUpdate);\r\n    this.setState({musicians: updatedMusicians});\r\n  }\r\n\r\n  handleDeleteMusician = async(id, event) => {\r\n    // using firstName as the id in musicians state\r\n    event.preventDefault();\r\n    try {\r\n      await axios.delete(`/musician/${id}`);\r\n      const updatedMusicians = await [...this.state.musicians].filter(musician => musician.firstName.toLowerCase() !== id);\r\n      this.setState({musicians: updatedMusicians});\r\n    }catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  fetchMusicians = async() => {\r\n    try{\r\n      const res = await axios.get('/musician/all');\r\n      const allMusicians = Object.keys(res.data).map((key) => {\r\n        return res.data[key];\r\n      });\r\n      this.setState({ musicians: [...allMusicians] });\r\n    }catch(err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  onAddMusicianFirstNameChange = event => this.setState({ newmusician: { ...this.state.newmusician, \"firstName\": event.target.value } });\r\n  onAddMusicianLastNameChange = event => this.setState({ newmusician: { ...this.state.newmusician, \"lastName\": event.target.value } });\r\n  onAddMusicianGenreChange = event => this.setState({ newmusician: { ...this.state.newmusician, \"genre\": event.target.value } });\r\n\r\n  componentDidMount = () => {\r\n    this.fetchMusicians();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <section className=\"section\">\r\n          <div className=\"container\">\r\n            <p className=\"subtitle is-5\">Add and remove musicians using the form below:</p>\r\n            <br />\r\n            <div className=\"columns\">\r\n              <div className=\"column is-one-third\">\r\n                <form onSubmit={event => this.handleAddMusician(this.state.newmusician.firstName.toLowerCase(), event)}>\r\n                  <div className=\"field\">\r\n                    <div className=\"control\">\r\n                      <input \r\n                        className=\"input is-medium\"\r\n                        type=\"text\" \r\n                        placeholder=\"Enter first name\"\r\n                        value={this.state.newmusician.firstName}\r\n                        onChange={this.onAddMusicianFirstNameChange}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"field\">\r\n                    <div className=\"control\">\r\n                      <input \r\n                        className=\"input is-medium\"\r\n                        type=\"text\" \r\n                        placeholder=\"Enter last name\"\r\n                        value={this.state.newmusician.lastName}\r\n                        onChange={this.onAddMusicianLastNameChange}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"field\">\r\n                    <div className=\"control\">\r\n                      <input \r\n                        className=\"input is-medium\"\r\n                        type=\"text\" \r\n                        placeholder=\"Enter genre\"\r\n                        value={this.state.newmusician.genre}\r\n                        onChange={this.onAddMusicianGenreChange}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"field\">\r\n                    <div className=\"control\">\r\n                      <button type=\"submit\" className=\"button is-primary is-medium\">\r\n                        Add musician\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n              <div className=\"column is-two-thirds\">\r\n                {\r\n                  this.state.musicians.map((musician, index) =>\r\n                    <Musician\r\n                        isAdmin={true}\r\n                        handleUpdateMusician={this.handleUpdateMusician}\r\n                        handleDeleteMusician={this.handleDeleteMusician}\r\n                        firstname={musician.firstName}\r\n                        lastname={musician.lastName}\r\n                        genre={musician.genre}\r\n                        key={musician.lastName.toLowerCase()}\r\n                        id={musician.firstName.toLowerCase()}\r\n                        index={index}\r\n                      />\r\n                  )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}